const root=document.documentElement,themeToggle=document.getElementById("themeToggle"),savedTheme=localStorage.getItem("theme");savedTheme&&(root.dataset.theme=savedTheme),themeToggle?.addEventListener("click",()=>{const e="dark"===root.dataset.theme?"light":"dark";root.dataset.theme=e,localStorage.setItem("theme",e)}),!savedTheme&&window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(root.dataset.theme="dark");const menuBtn=document.getElementById("menuBtn"),navLinks=document.getElementById("navLinks");menuBtn?.addEventListener("click",()=>{const e=navLinks?.classList.toggle("show");menuBtn.setAttribute("aria-expanded",String(!!e&&navLinks?.classList.contains("show")))});const year=document.getElementById("year");year&&(year.textContent=String((new Date).getFullYear()));const sotdDate=document.getElementById("sotdDate");function createPlaceholder(e="Placeholder",t=1600,a=900){const d=document.createElement("canvas");d.width=t,d.height=a;const n=d.getContext("2d"),o=n.createLinearGradient(0,0,t,a),r="dark"===root.dataset.theme;o.addColorStop(0,r?"#1c2740":"#e1e1e1"),o.addColorStop(1,r?"#0d1426":"#f7f7f7"),n.fillStyle=o,n.fillRect(0,0,t,a),n.fillStyle=r?"rgba(255,255,255,0.88)":"rgba(0,0,0,0.66)",n.font="700 72px system-ui, -apple-system, Segoe UI, Roboto",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t/2,a/2);return d.toDataURL("image/png")}function populatePlaceholders(){document.querySelectorAll(".ph").forEach(e=>{if(e.querySelector("img"))return;const t=e.dataset.label||"Placeholder",a=new Image;a.alt=t,a.src=createPlaceholder(t,e.classList.contains("hero-shot")?1920:1200,e.classList.contains("hero-shot")?900:900),e.appendChild(a)})}sotdDate&&(sotdDate.textContent=(new Date).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})),document.querySelectorAll('[data-accordion] .acc-btn').forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-controls")||"",a=document.getElementById(t),d="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",String(!d)),a&&(a.hidden=d)})}),populatePlaceholders();const lightbox=document.createElement("div");lightbox.className="lightbox",lightbox.hidden=!0,lightbox.setAttribute("role","dialog"),lightbox.setAttribute("aria-modal","true"),lightbox.innerHTML='<button class="btn" style="position:absolute;top:1rem;right:1rem;">✕</button><img alt="" style="width:min(1000px,92vw);max-height:85vh;border-radius:14px">',document.body.appendChild(lightbox),document.querySelectorAll(".shot").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.label||e.querySelector("img")?.getAttribute("alt")||"Shot",a=lightbox.querySelector("img");a.src=e.querySelector("img")?.src||createPlaceholder(t,1600,1200),a.alt=t,lightbox.hidden=!1})}),lightbox.addEventListener("click",e=>{"BUTTON"===e.target.tagName||e.target===lightbox&&(lightbox.hidden=!0)});const q=document.getElementById("q");q?.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),alert("Demo search: "+(q.value||"type keywords…")))});
